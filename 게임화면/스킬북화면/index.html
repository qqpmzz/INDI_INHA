<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lost Spells - ìŠ¤í‚¬ë¶</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <script>
        // iframe ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì•„ë‹ˆë©´ ê¸°ë³¸ê²Œì„í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        if (window.parent === window) {
            window.location.href = '../ê¸°ë³¸ê²Œì„í™”ë©´/index.html';
        }
    </script>
    <div class="skill-container">
        <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
        <button class="back-btn" onclick="goBack()">
            <span class="back-icon">â†</span>
            <span class="back-text">ê²Œì„ìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
        </button>

        <!-- ìŠ¤í‚¬ë¶ í—¤ë” -->
        <div class="skill-header">
            <h2 class="skill-title">
                <span class="skill-icon">âœ¨</span>
                ìŠ¤í‚¬ ë¶
            </h2>
            <div class="skill-controls">
                <span>WASD: ì´ë™ | Q/E: ì¹´í…Œê³ ë¦¬ | ESC: ëŒì•„ê°€ê¸°</span>
            </div>
        </div>

        <div class="skill-content">
            <!-- ì¹´í…Œê³ ë¦¬ -->
            <div class="skill-categories">
                <div class="skill-category active" data-category="all">
                    <span class="category-icon">ğŸ“‹</span>
                    <span class="category-name">ì „ì²´</span>
                </div>
                <div class="skill-category" data-category="attack">
                    <span class="category-icon">âš”ï¸</span>
                    <span class="category-name">ê³µê²©</span>
                </div>
                <div class="skill-category" data-category="defense">
                    <span class="category-icon">ğŸ›¡ï¸</span>
                    <span class="category-name">ë°©ì–´</span>
                </div>
                <div class="skill-category" data-category="healing">
                    <span class="category-icon">ğŸ’š</span>
                    <span class="category-name">ì¹˜ìœ </span>
                </div>
            </div>

            <!-- ìŠ¤í‚¬ ê·¸ë¦¬ë“œ -->
            <div class="skill-grid" id="skillGrid">
                <!-- ê³µê²© ìŠ¤í‚¬ -->
                <div class="skill-card unlocked" data-category="attack">
                    <div class="skill-card-icon">ğŸ”¥</div>
                    <div class="skill-card-name">Fireball</div>
                    <div class="skill-card-level">Lv.3</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "íŒŒì´ì–´ë³¼"</div>
                    <div class="skill-card-desc">í™”ì—¼ êµ¬ì²´ë¥¼ ë°œì‚¬í•˜ì—¬ ì ì„ ê³µê²©í•©ë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">ê³µê²©ë ¥: <span class="stat-damage">120</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">25</span></div>
                    </div>
                </div>

                <div class="skill-card unlocked" data-category="attack">
                    <div class="skill-card-icon">â„ï¸</div>
                    <div class="skill-card-name">Ice Bolt</div>
                    <div class="skill-card-level">Lv.2</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ì•„ì´ìŠ¤ ë³¼íŠ¸"</div>
                    <div class="skill-card-desc">ì–¼ìŒ í™”ì‚´ì„ ë°œì‚¬í•˜ì—¬ ì ì„ ë§ˆë¹„ì‹œí‚µë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">ê³µê²©ë ¥: <span class="stat-damage">100</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">20</span></div>
                    </div>
                </div>

                <div class="skill-card unlocked" data-category="attack">
                    <div class="skill-card-icon">âš¡</div>
                    <div class="skill-card-name">Lightning Bolt</div>
                    <div class="skill-card-level">Lv.2</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ë¼ì´íŠ¸ë‹ ë³¼íŠ¸"</div>
                    <div class="skill-card-desc">ë²ˆê°œë¥¼ ë°œì‚¬í•˜ì—¬ ì ì„ ê°ì „ì‹œí‚µë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">ê³µê²©ë ¥: <span class="stat-damage">140</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">30</span></div>
                    </div>
                </div>

                <div class="skill-card locked" data-category="attack">
                    <div class="skill-card-icon">ğŸ”’</div>
                    <div class="skill-card-name">Meteor</div>
                    <div class="skill-card-level">ì ê¹€</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ë©”í…Œì˜¤"</div>
                    <div class="skill-card-desc">ë ˆë²¨ 15 ë‹¬ì„± ì‹œ í•´ì œë©ë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">ê³µê²©ë ¥: <span class="stat-damage">300</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">60</span></div>
                    </div>
                </div>

                <!-- ë°©ì–´ ìŠ¤í‚¬ -->
                <div class="skill-card unlocked" data-category="defense">
                    <div class="skill-card-icon">ğŸ›¡ï¸</div>
                    <div class="skill-card-name">Magic Shield</div>
                    <div class="skill-card-level">Lv.4</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ë§¤ì§ ì‰´ë“œ"</div>
                    <div class="skill-card-desc">ë§ˆë²• ë°©ì–´ë§‰ì„ ìƒì„±í•˜ì—¬ í”¼í•´ë¥¼ ê°ì†Œì‹œí‚µë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">ë°©ì–´ë ¥: <span class="stat-defense">80</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">35</span></div>
                    </div>
                </div>

                <div class="skill-card unlocked" data-category="defense">
                    <div class="skill-card-icon">ğŸ’¨</div>
                    <div class="skill-card-name">Wind Barrier</div>
                    <div class="skill-card-level">Lv.2</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ìœˆë“œ ë°°ë¦¬ì–´"</div>
                    <div class="skill-card-desc">ë°”ëŒ ë°©ë²½ì„ ë§Œë“¤ì–´ íˆ¬ì‚¬ì²´ë¥¼ ë§‰ìŠµë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">ë°©ì–´ë ¥: <span class="stat-defense">60</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">25</span></div>
                    </div>
                </div>

                <!-- ì¹˜ìœ  ìŠ¤í‚¬ -->
                <div class="skill-card unlocked" data-category="healing">
                    <div class="skill-card-icon">ğŸ’š</div>
                    <div class="skill-card-name">Heal</div>
                    <div class="skill-card-level">Lv.5</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "í"</div>
                    <div class="skill-card-desc">ì²´ë ¥ì„ íšŒë³µí•©ë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">íšŒë³µëŸ‰: <span class="stat-healing">150</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">40</span></div>
                    </div>
                </div>

                <div class="skill-card unlocked" data-category="healing">
                    <div class="skill-card-icon">ğŸŒŸ</div>
                    <div class="skill-card-name">Regeneration</div>
                    <div class="skill-card-level">Lv.3</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ë¦¬ì œë„ˆë ˆì´ì…˜"</div>
                    <div class="skill-card-desc">ì§€ì†ì ìœ¼ë¡œ ì²´ë ¥ì„ íšŒë³µí•©ë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">íšŒë³µëŸ‰: <span class="stat-healing">30/ì´ˆ</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">50</span></div>
                    </div>
                </div>

                <div class="skill-card locked" data-category="healing">
                    <div class="skill-card-icon">ğŸ”’</div>
                    <div class="skill-card-name">Resurrection</div>
                    <div class="skill-card-level">ì ê¹€</div>
                    <div class="skill-card-pronunciation">ğŸ”Š "ë ˆì €ë ‰ì…˜"</div>
                    <div class="skill-card-desc">ë ˆë²¨ 20 ë‹¬ì„± ì‹œ í•´ì œë©ë‹ˆë‹¤</div>
                    <div class="skill-card-stats">
                        <div class="stat">íšŒë³µëŸ‰: <span class="stat-healing">Full</span></div>
                        <div class="stat">ë§ˆë‚˜: <span class="stat-mana">100</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentCategory = 'all';
        let selectedCardIndex = 0;

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.addEventListener('keydown', function (event) {
            const key = event.key.toLowerCase();

            switch (key) {
                case 'w':
                    navigateCards('up');
                    break;
                case 'a':
                    navigateCards('left');
                    break;
                case 's':
                    navigateCards('down');
                    break;
                case 'd':
                    navigateCards('right');
                    break;
                case 'q':
                    switchCategory(-1);
                    break;
                case 'e':
                    switchCategory(1);
                    break;
                case 'escape':
                    goBack();
                    break;
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', function () {
            showCategory('all');
            highlightSelectedCard();
        });

        function switchCategory(direction) {
            const categories = ['all', 'attack', 'defense', 'healing'];
            const currentIndex = categories.indexOf(currentCategory);
            let newIndex = currentIndex + direction;

            if (newIndex < 0) newIndex = categories.length - 1;
            if (newIndex >= categories.length) newIndex = 0;

            currentCategory = categories[newIndex];
            showCategory(currentCategory);
            selectedCardIndex = 0;
            highlightSelectedCard();
        }

        function showCategory(category) {
            // ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.skill-category').forEach(cat => {
                cat.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');

            // ìŠ¤í‚¬ ì¹´ë“œ í•„í„°ë§
            const skillCards = document.querySelectorAll('.skill-card');
            skillCards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });

            currentCategory = category;
        }

        function navigateCards(direction) {
            const visibleCards = Array.from(document.querySelectorAll('.skill-card'))
                .filter(card => card.style.display !== 'none');

            if (visibleCards.length === 0) return;

            const cols = 4; // í•œ ì¤„ì— 4ê°œì”©

            switch (direction) {
                case 'up':
                    selectedCardIndex = Math.max(0, selectedCardIndex - cols);
                    break;
                case 'down':
                    selectedCardIndex = Math.min(visibleCards.length - 1, selectedCardIndex + cols);
                    break;
                case 'left':
                    selectedCardIndex = Math.max(0, selectedCardIndex - 1);
                    break;
                case 'right':
                    selectedCardIndex = Math.min(visibleCards.length - 1, selectedCardIndex + 1);
                    break;
            }

            highlightSelectedCard();
        }

        function highlightSelectedCard() {
            const visibleCards = Array.from(document.querySelectorAll('.skill-card'))
                .filter(card => card.style.display !== 'none');

            // ëª¨ë“  ì¹´ë“œì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.skill-card').forEach(card => {
                card.classList.remove('selected');
            });

            // ì„ íƒëœ ì¹´ë“œì— selected í´ë˜ìŠ¤ ì¶”ê°€
            if (visibleCards[selectedCardIndex]) {
                visibleCards[selectedCardIndex].classList.add('selected');
                visibleCards[selectedCardIndex].scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }

        function goBack() {
            // íŒì—…ì—ì„œ í˜¸ì¶œëœ ê²½ìš° ë¶€ëª¨ ìœˆë„ìš°ì—ê²Œ ë‹«ê¸° ë©”ì‹œì§€ ì „ì†¡
            if (window.parent !== window) {
                window.parent.postMessage('closePopup', '*');
            } else {
                window.location.href = '../ê¸°ë³¸ê²Œì„í™”ë©´/index.html';
            }
        }
    </script>
</body>

</html>